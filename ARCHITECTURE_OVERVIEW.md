# CMO Simulator - Architecture Overview

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                     (Next.js 15 App Router)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Client Components â”‚   â”‚ Server Components â”‚
         â”‚   (Interactive UI)  â”‚   â”‚   (Data Fetching) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   React Hooks       â”‚   â”‚   Supabase Client â”‚
         â”‚   - useSimulation   â”‚   â”‚   - Auth          â”‚
         â”‚   - useDebrief      â”‚   â”‚   - Database      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           BUSINESS LOGIC LAYER                 â”‚
         â”‚                                                â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚      Simulation Engine                  â”‚  â”‚
         â”‚  â”‚  - initializeSimulation()               â”‚  â”‚
         â”‚  â”‚  - processQuarter()                     â”‚  â”‚
         â”‚  â”‚  - finalizeSimulation()                 â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                                â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚      Scoring Engine                     â”‚  â”‚
         â”‚  â”‚  - calculateMarketShare()               â”‚  â”‚
         â”‚  â”‚  - calculateSEOImpact()                 â”‚  â”‚
         â”‚  â”‚  - calculatePaidAdsImpact()             â”‚  â”‚
         â”‚  â”‚  - calculateBrandEquity()               â”‚  â”‚
         â”‚  â”‚  - calculateTeamMorale()                â”‚  â”‚
         â”‚  â”‚  - calculateFinalScore()                â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                                â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚      Event System                       â”‚  â”‚
         â”‚  â”‚  - generateWildcardEvent()              â”‚  â”‚
         â”‚  â”‚  - COMPETITIVE_EVENTS                   â”‚  â”‚
         â”‚  â”‚  - MARKET_SHIFT_EVENTS                  â”‚  â”‚
         â”‚  â”‚  - INTERNAL_CRISIS_EVENTS               â”‚  â”‚
         â”‚  â”‚  - OPPORTUNITY_EVENTS                   â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              DATA LAYER                       â”‚
         â”‚            (Supabase PostgreSQL)              â”‚
         â”‚                                               â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
         â”‚  â”‚  simulations_enhanced                â”‚    â”‚
         â”‚  â”‚  - Phase 0 config                    â”‚    â”‚
         â”‚  â”‚  - Financial metrics                 â”‚    â”‚
         â”‚  â”‚  - Hidden metrics                    â”‚    â”‚
         â”‚  â”‚  - Final scores                      â”‚    â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
         â”‚                                               â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
         â”‚  â”‚  quarterly_results                   â”‚    â”‚
         â”‚  â”‚  decision_points                     â”‚    â”‚
         â”‚  â”‚  wildcard_events                     â”‚    â”‚
         â”‚  â”‚  tactics_used                        â”‚    â”‚
         â”‚  â”‚  talent_hires                        â”‚    â”‚
         â”‚  â”‚  big_bets                            â”‚    â”‚
         â”‚  â”‚  ab_test_results                     â”‚    â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
         â”‚                                               â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
         â”‚  â”‚  Views & Functions                   â”‚    â”‚
         â”‚  â”‚  - leaderboard_view                  â”‚    â”‚
         â”‚  â”‚  - industry_averages                 â”‚    â”‚
         â”‚  â”‚  - calculate_percentile()            â”‚    â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow

### Simulation Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Phase 0   â”‚  User defines strategic foundation
â”‚   Setup     â”‚  â†’ Company name, industry, budget allocation
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Strategy   â”‚  User defines tactical approach
â”‚  Session    â”‚  â†’ Target audience, positioning, channels
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Q1      â”‚  Foundation & Launch
â”‚             â”‚  â†’ A/B test, tactics, wildcard
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Q2      â”‚  Optimization & Reaction
â”‚             â”‚  â†’ Talent hire, wildcard, budget pivot
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Q3      â”‚  Scaling & Expansion
â”‚             â”‚  â†’ Double down or diversify, wildcard
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Q4      â”‚  Final Push
â”‚             â”‚  â†’ Big bet, final tactics
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Results   â”‚  Final dashboard with scores
â”‚  Dashboard  â”‚  â†’ Revenue, market share, ROI, grade
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Campaign   â”‚  Deep analysis of decisions
â”‚   Debrief   â”‚  â†’ Timeline, insights, recommendations
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Quarter Processing Flow

```
User Submits Decisions
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validate Decisions â”‚
â”‚  - Budget check     â”‚
â”‚  - Hours check      â”‚
â”‚  - Min requirements â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calculate Results  â”‚
â”‚                     â”‚
â”‚  1. SEO Traffic     â”‚â—„â”€â”€â”€ Compounding from previous quarters
â”‚     (Compounding)   â”‚
â”‚                     â”‚
â”‚  2. Paid Ads        â”‚â—„â”€â”€â”€ Diminishing returns curve
â”‚     (Diminishing)   â”‚
â”‚                     â”‚
â”‚  3. Conversions     â”‚â—„â”€â”€â”€ A/B test impact (Q1)
â”‚     (with modifiers)â”‚
â”‚                     â”‚
â”‚  4. Revenue         â”‚â—„â”€â”€â”€ Morale multiplier applied
â”‚     (Morale-adjusted)â”‚
â”‚                     â”‚
â”‚  5. Wildcard Impact â”‚â—„â”€â”€â”€ Player's response choice
â”‚     (Event response)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Metrics     â”‚
â”‚                     â”‚
â”‚  - Brand Equity     â”‚â—„â”€â”€â”€ Content quality, PR, satisfaction
â”‚  - Team Morale      â”‚â—„â”€â”€â”€ Hours worked, training, crises
â”‚  - Market Share     â”‚â—„â”€â”€â”€ Share of Voice model
â”‚  - Market Saturationâ”‚â—„â”€â”€â”€ Total market spend
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Save to Database   â”‚
â”‚  - Quarterly resultsâ”‚
â”‚  - Decision points  â”‚
â”‚  - Tactics used     â”‚
â”‚  - Wildcard events  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return New State   â”‚
â”‚  - Updated metrics  â”‚
â”‚  - Next quarter     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§® Scoring Calculation Flow

```
Simulation Complete
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gather All Quarterly Data              â”‚
â”‚  - Revenue per quarter                  â”‚
â”‚  - Spend per quarter                    â”‚
â”‚  - Market share progression             â”‚
â”‚  - Brand equity evolution               â”‚
â”‚  - Team morale changes                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calculate Final Metrics                â”‚
â”‚                                         â”‚
â”‚  Total Revenue = Î£(quarterly revenue)   â”‚
â”‚  Total Profit = Revenue - Budget Spent  â”‚
â”‚  ROI = (Profit / Budget Spent) Ã— 100    â”‚
â”‚  Final Market Share = Last quarter      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calculate Strategy Score Components    â”‚
â”‚                                         â”‚
â”‚  Market Share Score = Share Ã— 1000      â”‚
â”‚  ROI Score = ROI Ã— 100                  â”‚
â”‚  Brand Equity Score = Equity Ã— 10       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Final Strategy Score                   â”‚
â”‚                                         â”‚
â”‚  Score = Market Share Score             â”‚
â”‚        + ROI Score                      â”‚
â”‚        + Brand Equity Score             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Assign Grade                           â”‚
â”‚  A+: 8000+                              â”‚
â”‚  A:  6000-7999                          â”‚
â”‚  B:  4000-5999                          â”‚
â”‚  C:  2000-3999                          â”‚
â”‚  D:  1000-1999                          â”‚
â”‚  F:  <1000                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Insights                      â”‚
â”‚  - Analyze strengths                    â”‚
â”‚  - Identify weaknesses                  â”‚
â”‚  - Create recommendations               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calculate Percentile                   â”‚
â”‚  - Count simulations with lower scores  â”‚
â”‚  - Divide by total simulations          â”‚
â”‚  - Multiply by 100                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Component Hierarchy

```
App
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Header (with auth)
â”‚   â””â”€â”€ Navigation
â”‚
â”œâ”€â”€ Landing Page (/)
â”‚   â””â”€â”€ Hero + Features
â”‚
â”œâ”€â”€ Auth Pages
â”‚   â”œâ”€â”€ /login
â”‚   â””â”€â”€ /signup
â”‚
â”œâ”€â”€ Dashboard (/dashboard)
â”‚   â”œâ”€â”€ Simulation List
â”‚   â”œâ”€â”€ Stats Overview
â”‚   â””â”€â”€ Quick Actions
â”‚
â”œâ”€â”€ Simulation Flow (/sim)
â”‚   â”‚
â”‚   â”œâ”€â”€ Setup (/sim/setup)
â”‚   â”‚   â”œâ”€â”€ Step 1: Company Name
â”‚   â”‚   â”œâ”€â”€ Step 2: Time Horizon
â”‚   â”‚   â”œâ”€â”€ Step 3: Industry
â”‚   â”‚   â”œâ”€â”€ Step 4: Company Profile
â”‚   â”‚   â”œâ”€â”€ Step 5: Market Landscape
â”‚   â”‚   â””â”€â”€ Step 6: Budget Allocation
â”‚   â”‚
â”‚   â”œâ”€â”€ Strategy (/sim/strategy)
â”‚   â”‚   â”œâ”€â”€ Target Audience
â”‚   â”‚   â”œâ”€â”€ Brand Positioning
â”‚   â”‚   â””â”€â”€ Primary Channels
â”‚   â”‚
â”‚   â”œâ”€â”€ Quarter 1 (/sim/q1)
â”‚   â”‚   â”œâ”€â”€ A/B Test Mini-Game
â”‚   â”‚   â”œâ”€â”€ Tactic Selection
â”‚   â”‚   â”œâ”€â”€ Wildcard Event
â”‚   â”‚   â””â”€â”€ Results Preview
â”‚   â”‚
â”‚   â”œâ”€â”€ Quarter 2 (/sim/q2)
â”‚   â”‚   â”œâ”€â”€ Talent Market
â”‚   â”‚   â”œâ”€â”€ Tactic Selection
â”‚   â”‚   â”œâ”€â”€ Wildcard Event
â”‚   â”‚   â””â”€â”€ Budget Pivot Option
â”‚   â”‚
â”‚   â”œâ”€â”€ Quarter 3 (/sim/q3)
â”‚   â”‚   â”œâ”€â”€ Double Down vs. Diversify
â”‚   â”‚   â”œâ”€â”€ Tactic Selection
â”‚   â”‚   â”œâ”€â”€ Wildcard Event
â”‚   â”‚   â””â”€â”€ Results Preview
â”‚   â”‚
â”‚   â”œâ”€â”€ Quarter 4 (/sim/q4)
â”‚   â”‚   â”œâ”€â”€ Big Bet Selection
â”‚   â”‚   â”œâ”€â”€ Final Tactics
â”‚   â”‚   â””â”€â”€ Campaign Wrap-up
â”‚   â”‚
â”‚   â””â”€â”€ Debrief (/sim/debrief/[id])
â”‚       â”œâ”€â”€ Score Overview
â”‚       â”œâ”€â”€ Decision Timeline Tab
â”‚       â”œâ”€â”€ Strategic Analysis Tab
â”‚       â”œâ”€â”€ Comparison Tab
â”‚       â””â”€â”€ Export Options
â”‚
â””â”€â”€ Leaderboard (/leaderboard)
    â”œâ”€â”€ Filters (Industry, Time Horizon)
    â”œâ”€â”€ Rankings Table
    â””â”€â”€ User Rank Highlight
```

---

## ğŸ—„ï¸ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  auth.users         â”‚
â”‚  (Supabase Auth)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:1
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  profiles           â”‚
â”‚  - brand_theme      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  simulations_enhanced       â”‚
â”‚  - Phase 0 config           â”‚
â”‚  - Financial metrics        â”‚
â”‚  - Hidden metrics           â”‚
â”‚  - Final scores             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚             â”‚             â”‚             â”‚             â”‚
           â”‚ 1:N         â”‚ 1:N         â”‚ 1:N         â”‚ 1:N         â”‚ 1:N
           â”‚             â”‚             â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚ quarterly_    â”‚ â”‚ decision_ â”‚ â”‚ wildcard_ â”‚ â”‚ tactics_  â”‚ â”‚talent_â”‚
â”‚ results       â”‚ â”‚ points    â”‚ â”‚ events    â”‚ â”‚ used      â”‚ â”‚hires  â”‚
â”‚               â”‚ â”‚           â”‚ â”‚           â”‚ â”‚           â”‚ â”‚       â”‚
â”‚ - Revenue     â”‚ â”‚ - Type    â”‚ â”‚ - Event   â”‚ â”‚ - Tactic  â”‚ â”‚- Role â”‚
â”‚ - Profit      â”‚ â”‚ - Impact  â”‚ â”‚ - Responseâ”‚ â”‚ - Spend   â”‚ â”‚- Bonusâ”‚
â”‚ - Traffic     â”‚ â”‚ - Reason  â”‚ â”‚ - Impact  â”‚ â”‚ - Results â”‚ â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Row Level Security (RLS)               â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Users can only:                â”‚   â”‚
â”‚  â”‚  - View their own simulations   â”‚   â”‚
â”‚  â”‚  - Insert their own data        â”‚   â”‚
â”‚  â”‚  - Update their own records     â”‚   â”‚
â”‚  â”‚  - Delete their own content     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Public access to:              â”‚   â”‚
â”‚  â”‚  - Leaderboard (read-only)      â”‚   â”‚
â”‚  â”‚  - Achievements (read-only)     â”‚   â”‚
â”‚  â”‚  - Industry averages (read-only)â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authentication Flow                    â”‚
â”‚                                         â”‚
â”‚  1. User signs up/logs in               â”‚
â”‚  2. Supabase creates session            â”‚
â”‚  3. Session stored in httpOnly cookie   â”‚
â”‚  4. Middleware validates on each requestâ”‚
â”‚  5. Server components access user data  â”‚
â”‚  6. RLS policies enforce permissions    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client State (React Hooks)             â”‚
â”‚                                         â”‚
â”‚  - UI state (loading, errors)           â”‚
â”‚  - Form inputs                          â”‚
â”‚  - Modal visibility                     â”‚
â”‚  - Tab selection                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Simulation State (XState + Hook)       â”‚
â”‚                                         â”‚
â”‚  - Current quarter                      â”‚
â”‚  - Budget remaining                     â”‚
â”‚  - Hidden metrics                       â”‚
â”‚  - Quarterly results                    â”‚
â”‚  - Decision history                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Persistent State (localStorage)        â”‚
â”‚                                         â”‚
â”‚  - In-progress simulation               â”‚
â”‚  - User preferences                     â”‚
â”‚  - Draft decisions                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server State (Supabase)                â”‚
â”‚                                         â”‚
â”‚  - Completed simulations                â”‚
â”‚  - User profile                         â”‚
â”‚  - Leaderboard data                     â”‚
â”‚  - Historical results                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Performance Optimizations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Optimizations                 â”‚
â”‚                                         â”‚
â”‚  âœ“ Server Components (reduce JS)        â”‚
â”‚  âœ“ Code splitting (lazy loading)        â”‚
â”‚  âœ“ React.memo (prevent re-renders)      â”‚
â”‚  âœ“ useMemo/useCallback (memoization)    â”‚
â”‚  âœ“ Image optimization (Next.js)         â”‚
â”‚  âœ“ Font optimization (next/font)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Optimizations                  â”‚
â”‚                                         â”‚
â”‚  âœ“ Database indexes (fast queries)      â”‚
â”‚  âœ“ Views (pre-aggregated data)          â”‚
â”‚  âœ“ Connection pooling (Supabase)        â”‚
â”‚  âœ“ RLS policies (security + speed)      â”‚
â”‚  âœ“ Batch operations (reduce round trips)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Caching Strategy                       â”‚
â”‚                                         â”‚
â”‚  âœ“ Leaderboard (5 min cache)            â”‚
â”‚  âœ“ Industry averages (1 hour cache)     â”‚
â”‚  âœ“ Static pages (ISR)                   â”‚
â”‚  âœ“ User simulations (SWR)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Responsive Design Breakpoints

```
Mobile First Approach

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mobile (< 768px)                       â”‚
â”‚  - Single column layout                 â”‚
â”‚  - Stacked cards                        â”‚
â”‚  - Simplified navigation                â”‚
â”‚  - Touch-optimized buttons              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tablet (768px - 1024px)                â”‚
â”‚  - Two column layout                    â”‚
â”‚  - Side-by-side comparisons             â”‚
â”‚  - Expanded navigation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Desktop (> 1024px)                     â”‚
â”‚  - Three+ column layout                 â”‚
â”‚  - Full dashboard views                 â”‚
â”‚  - Hover interactions                   â”‚
â”‚  - Keyboard shortcuts                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Deployment Pipeline

```
Developer
    â”‚
    â”‚ git push
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub    â”‚
â”‚  Repository â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ webhook
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel    â”‚
â”‚   Build     â”‚
â”‚             â”‚
â”‚  1. Install â”‚
â”‚  2. Build   â”‚
â”‚  3. Test    â”‚
â”‚  4. Deploy  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ deploy
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production â”‚
â”‚   (Edge)    â”‚
â”‚             â”‚
â”‚  - Next.js  â”‚
â”‚  - Assets   â”‚
â”‚  - API      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ connects to
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase   â”‚
â”‚  (Database) â”‚
â”‚             â”‚
â”‚  - Auth     â”‚
â”‚  - Data     â”‚
â”‚  - Storage  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:
- âœ… **Scalability**: Handle thousands of concurrent users
- âœ… **Performance**: Fast load times, smooth interactions
- âœ… **Security**: RLS policies, auth middleware
- âœ… **Maintainability**: Modular code, clear separation
- âœ… **Extensibility**: Easy to add new features
- âœ… **Reliability**: Error handling, validation
- âœ… **Developer Experience**: Type-safe, well-documented

Ready for production! ğŸš€
